{
  "id": "nodepool-002",
  "name": "Scale node pools only (no create/delete)",
  "description": "Policy that grants the ability to scale node pools (update config) but not create or delete them. Useful for operators who need to adjust capacity.",
  "policyFile": "scale-nodepools-only.cedar",
  "testCases": [
    {
      "description": "User can update node pool config (scaling)",
      "request": {
        "action": "UpdateNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "ALLOW"
    },
    {
      "description": "User can describe node pools",
      "request": {
        "action": "DescribeNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "ALLOW"
    },
    {
      "description": "User cannot create new node pools",
      "request": {
        "action": "CreateNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:cluster/cluster1"
      },
      "expectedResult": "DENY"
    },
    {
      "description": "User cannot delete node pools",
      "request": {
        "action": "DeleteNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "DENY"
    },
    {
      "description": "User cannot delete the cluster",
      "request": {
        "action": "DeleteCluster",
        "resource": "arn:aws:rosa:us-west-2:111122223333:cluster/cluster1"
      },
      "expectedResult": "DENY"
    }
  ],
  "notes": "UpdateNodePool covers both config changes (scaling, labels) and version updates. The V0 actions UpdateNodePoolConfig and UpdateNodePoolVersion are both mapped to the single Cedar action UpdateNodePool. The last test case was changed from 'cannot update version' (which would now be ALLOW since UpdateNodePool is permitted) to 'cannot delete cluster' to test a genuinely denied action."
}
